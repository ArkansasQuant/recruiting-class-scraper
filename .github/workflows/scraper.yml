name: Run Recruiting Class Scraper

on:
workflow_dispatch:
inputs:
test_mode:
description: â€˜Test mode (true = 50 players, false = full scrape)â€™
required: true
default: â€˜falseâ€™
type: choice
options:
- â€˜trueâ€™
- â€˜falseâ€™
validation_sample:
description: â€˜Number of players for accuracy validationâ€™
required: true
default: â€˜20â€™
type: string

jobs:
scrape:
runs-on: ubuntu-latest
timeout-minutes: 360  # 6 hours max

```
steps:
  - name: Checkout repository
    uses: actions/checkout@v3
  
  - name: Set up Python
    uses: actions/setup-python@v4
    with:
      python-version: '3.9'
  
  - name: Install dependencies
    run: |
      pip install -r requirements.txt
      playwright install chromium
      playwright install-deps
  
  - name: Run scraper
    env:
      TEST_MODE: ${{ github.event.inputs.test_mode }}
    run: |
      python scraper.py
  
  - name: Validate output structure
    if: always()
    run: |
      python validate_output.py
  
  - name: Validate accuracy
    if: always()
    run: |
      python validate_accuracy.py ${{ github.event.inputs.validation_sample }}
  
  - name: Upload CSV output
    uses: actions/upload-artifact@v4
    if: always()
    with:
      name: CSV_Output
      path: output/*.csv
      retention-days: 90
  
  - name: Upload diagnostics
    uses: actions/upload-artifact@v4
    if: always()
    with:
      name: Diagnostics
      path: output/diagnostics/
      retention-days: 30
  
  - name: Display summary
    if: always()
    run: |
      echo "============================================"
      echo "ðŸŽ“ RECRUITING CLASS SCRAPER SUMMARY"
      echo "============================================"
      echo ""
      echo "ðŸ“Š Output Files:"
      ls -lh output/*.csv 2>/dev/null || echo "No CSV files generated"
      echo ""
      echo "ðŸ” Diagnostic Files:"
      ls -lh output/diagnostics/ 2>/dev/null || echo "No diagnostic files"
      echo ""
      echo "âœ… Workflow Complete!"
      echo "Download artifacts above to get your data."
      echo "============================================"
```